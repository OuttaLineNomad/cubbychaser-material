<!DOCTYPE html>
<html lang="en">

<head>
    <title>Cubby Chaser</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="assets/css/core.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.teal-red.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>



    <style>
        .card-square.mdl-card {
            width: 160px;
            min-height: 160px;
            float: left;
            margin: 2px;
            padding: 2px;
        }

        .cubby-side {
            width: 100%;
            min-height: 652px;
            padding: 10%;
        }


        body {
            background: #eeeded;
        }

        .mdl-cell {
            float: left;
        }

        .mdl-grid {
            padding: 0px;
        }

        .cubby-pad {
            padding: 1%;
        }

        .cubby-warn {
            background: rgb(255, 82, 82);
            padding: 0px;
            width: 100%;
            height: 80px;
            text-align: center;
        }

        .cubby-warn>i {
            line-height: -35px;
            font-size: 62px;
            color: white;
            margin-top: 15px;
        }

        .dialog-button {
            width: 300px;
            align-self: auto;
        }

        .mdl-dialog__actions>*:first-child {
            margin-right: 1em;
        }

        #warning-title {
            color: rgb(255, 82, 82);
            text-align: center;
        }
    </style>



</head>

<body>

    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
        <header class="mdl-layout__header">
            <div class="mdl-layout__header-row">
                <!-- Title -->
                <span class="mdl-layout-title">Cubby Chaser</span>
                <!-- Add spacer, to align navigation to the right -->
                <div class="mdl-layout-spacer"></div>
                <!-- Navigation. We hide it in small screens. -->
                <nav class="mdl-navigation mdl-layout--large-screen-only">
                </nav>
            </div>
        </header>
        <div class="mdl-layout__drawer">
            <span class="mdl-layout-title">Account</span>
            <nav class="mdl-navigation">
                <a class="mdl-navigation__link" href="">Link</a>
                <a class="mdl-navigation__link" href="">Link</a>
                <a class="mdl-navigation__link" href="">Link</a>
                <a class="mdl-navigation__link" href="">Link</a>
            </nav>
        </div>
        <main class="mdl-layout__content">
            <div class="page-content">
                <div class="mdl-cell mdl-cell--2-col">
                    <div class="mdl-card cubby-side mdl-shadow--2dp">
                        <span class="mdl-layout-title">Assign Cubbies</span>
                        <form action="#">
                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                <input class="mdl-textfield__input" type="text" id="upc-sku" onkeypress="return skpcSearch(event)">
                                <label class="mdl-textfield__label" for="upc-sku">UPC/SKU</label>
                            </div>
                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                <input class="mdl-textfield__input" type="text" id="cubby" pattern="[Dd][0-9]{3,}" onkeypress="return cubbyAssign(event)">
                                <label class="mdl-textfield__label" for="cubby">Cubby</label>
                                <span class="mdl-textfield__error">Invalid Cubby!</span>
                            </div>
                        </form>
                        <dialog id="dialog" class="mdl-dialog" style="padding:0px">
                            <div class="cubby-warn">
                                <i class="material-icons cubby-warn">warning</i>
                            </div>
                            <h3 class="mdl-dialog__title" id="warning-title"></h3>
                            <div class="mdl-dialog__content">
                                <p id="warning-message"></p>
                            </div>
                            <div class="mdl-dialog__actions">
                                <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent dialog-button" autofocus="true">
                                    close
                                  </button>
                            </div>
                        </dialog>
                    </div>
                </div>


                <div class="mdl-cell mdl-cell--9-col">
                    <div class="content-grid mdl-grid">

                        <div class="mdl-card card-square mdl-shadow--2dp"></div>
                        <div class="mdl-card card-square mdl-shadow--2dp"></div>
                        <div class="mdl-card card-square mdl-shadow--2dp"></div>
                        <div class="mdl-card card-square mdl-shadow--2dp"></div>
                        <div class="mdl-card card-square mdl-shadow--2dp"></div>
                    </div>

                    <div class="content-grid mdl-grid">
                        <div class="mdl-card card-square mdl-shadow--2dp"></div>
                        <div class="mdl-card card-square mdl-shadow--2dp"></div>
                        <div class="mdl-card card-square mdl-shadow--2dp"></div>
                        <div class="mdl-card card-square mdl-shadow--2dp"></div>
                        <div class="mdl-card card-square mdl-shadow--2dp"></div>
                    </div>

                    <div class="content-grid mdl-grid">
                        <div class="mdl-card card-square mdl-shadow--2dp"></div>
                        <div class="mdl-card card-square mdl-shadow--2dp"></div>
                        <div class="mdl-card card-square mdl-shadow--2dp"></div>
                        <div class="mdl-card card-square mdl-shadow--2dp"></div>
                        <div class="mdl-card card-square mdl-shadow--2dp"></div>
                    </div>

                    <div class="content-grid mdl-grid">
                        <div class="mdl-card card-square mdl-shadow--2dp"></div>
                        <div class="mdl-card card-square mdl-shadow--2dp"></div>
                        <div class="mdl-card card-square mdl-shadow--2dp"></div>
                        <div class="mdl-card card-square mdl-shadow--2dp"></div>
                        <div class="mdl-card card-square mdl-shadow--2dp"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>






</body>

</html>

<script>
    function skpcSearch(e) {
        if (e.keyCode == 13) {
            var skupc = document.getElementById("upc-sku")
            // Replace with function to server
            console.log(skupc.value)
            var ok = fakeSend(skupc.value)
            // Replace above
            if (!ok) {
                alertMaterial(skupc)
                skupc.focus()
                return false
            }
            document.getElementById("cubby").focus()
            return false
        }
    }

    function cubbyAssign(e) {
        if (e.keyCode == 13) {
            var skupc = document.getElementById("upc-sku")
            var cubby = document.getElementById("cubby")
            var pat = /[Dd][0-9]{3,}/
            if(!pat.test(cubby.value)){return}
            if(skupc.value == ''){
                alertMaterial(skupc)
                cubby.focus()
                return
            }
            // Replace with fucntion to send to server
            // also make true/false for errors to move on
            var ok = fakeSend(cubby.value)
            console.log(cubby.value)
            // Replace above
            if (!ok) {
                alertMaterial(cubby)
                return
            }
            skupc.value = ''
            cubby.value = ''
            skupc.focus()
            return
        }
    }

    function fakeSend(val) {
        if (val == "012345678912" || val == "D002") {
            return true
        }
        return false
    }

    function alertMaterial(elem) {
        var val = elem.value
        if (elem.id != "cubby") {
            var title = "Wrong SKU"
            var msg = "<b>"+val+"</b> is not a known SKU. "+"Try using UPC or re-enter the SKU."
            var UPCreg = /[0-9]{12,13}$/
            if(val == ''){
                title = "Missing UPC/SKU"
                msg ="You must provide a UPC or SKU to continue"
            }
            
            if (UPCreg.test(val)) {
                title = "Wrong UPC"
                msg = "<b>"+val+"</b> is not a known UPC. "+"Try using SKU or re-enter the UPC."
            }
        } else {
            var title = "Wrong Cubby"
            var msg ="<b>"+val+"</b> is not the right cubby. "+"Check that you put the product into the right cubby."
        }
        var dialog = document.querySelector('#dialog')
        document.getElementById("warning-title").innerHTML = title
        document.getElementById("warning-message").innerHTML = msg
        dialog.showModal()
    }

    (function () {
        dialog.querySelector('button:not([disabled])')
            .addEventListener('click', function () {
                dialog.close();
            });

    }())
</script>